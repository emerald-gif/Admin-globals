<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Admin Dashboard - 2025 Fintech UI</title>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
  
 


  <style>
    .dashboard-card {
      @apply bg-white rounded-2xl shadow-lg p-6 border border-gray-100;
    }
  </style>
</head>
<body class="bg-gray-50 text-gray-800 font-sans">

  <div class="min-h-screen flex">
    <!-- Sidebar -->
    <aside class="w-64 bg-white shadow-xl rounded-r-3xl p-5">
      <div class="text-2xl font-bold text-blue-700 mb-6">Globals Admin</div>
      <nav class="space-y-4">
        <button class="flex items-center w-full gap-3 text-left text-gray-700 hover:text-blue-700" onclick="switchTab('overview')">
          <i data-lucide="bar-chart-3" class="w-5 h-5"></i> Overview
        </button>
        <button class="flex items-center w-full gap-3 text-left text-gray-700 hover:text-blue-700" onclick="switchTab('users')">
          <i data-lucide="users" class="w-5 h-5"></i> Users
        </button>
        <button class="flex items-center w-full gap-3 text-left text-gray-700 hover:text-blue-700" onclick="switchTab('adminReviewJobsSection')">
          <i data-lucide="clipboard-list" class="w-5 h-5"></i> Affiliate/Tasks Jobs
        </button>
        <button class="flex items-center w-full gap-3 text-left text-gray-700 hover:text-blue-700" onclick="switchTab('taskSubmissionsTab')">
          <i data-lucide="file-check" class="w-5 h-5"></i> Task Submissions
        </button>

        <button class="flex items-center w-full gap-3 text-left text-gray-700 hover:text-blue-700" onclick="switchTab('adminPostJob')">
          <i data-lucide="file-check" class="w-5 h-5"></i> Post Admin Job
        </button>

        <button class="flex items-center w-full gap-3 text-left text-gray-700 hover:text-blue-700" onclick="switchTab('withdrawals')">
          <i data-lucide="banknote" class="w-5 h-5"></i> Withdrawals
        </button>

        <button class="flex items-center w-full gap-3 text-left text-gray-700 hover:text-blue-700" onclick="switchTab('adminNotificationSender')">
          <i data-lucide="banknote" class="w-5 h-5"></i> Notification
        </button>

        <button class="flex items-center w-full gap-3 text-left text-gray-700 hover:text-blue-700" onclick="switchTab('social-tasks-admin')">
          <i data-lucide="banknote" class="w-5 h-5"></i> Social Tasks
        </button>


        <button class="flex items-center w-full gap-3 text-left text-gray-700 hover:text-blue-700" 
        onclick="switchTab('bills-admin')">
  <i data-lucide="smartphone" class="w-5 h-5"></i> Airtime & Data
</button>

        
        <button class="flex items-center w-full gap-3 text-left text-gray-700 hover:text-blue-700" onclick="switchTab('team')">
          <i data-lucide="banknote" class="w-5 h-5"></i> Referral Stat
        </button>





       <button class="flex items-center w-full gap-3 text-left text-gray-700 hover:text-blue-700" onclick="switchTab('admin-checkin-screen')">
          <i data-lucide="banknote" class="w-5 h-5"></i>  admin-checkin
        </button> 



      </nav>
    </aside>









    
    <!-- Content Area -->
    <main class="flex-1 p-6 overflow-y-auto">
      <!-- Overview -->
      <section id="overview" class="tab">
        <h2 class="text-2xl font-bold mb-6">Overview</h2>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          <div class="dashboard-card">
            <p class="text-sm text-gray-500">Total Users</p>
            <p class="text-3xl font-semibold text-blue-600" id="user-count">Loading...</p>
          </div>
          <div class="dashboard-card">
            <p class="text-sm text-gray-500">Tasks Submitted</p>
            <p class="text-3xl font-semibold text-purple-600" id="task-count">Loading...</p>
          </div>
          <div class="dashboard-card">
            <p class="text-sm text-gray-500">Total Withdrawals</p>
            <p class="text-3xl font-semibold text-green-600" id="withdrawal-count">Loading...</p>
          </div>
        </div>
      </section>










      
      <!-- Users -->
      <section id="users" class="tab hidden mt-6">
  <h2 class="text-2xl font-bold mb-6">Users Dashboard</h2>

  <!-- Stats Row -->
  <div id="user-stats" class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
    <div class="bg-white p-4 rounded-2xl shadow flex flex-col items-center">
      <div class="text-lg font-bold" id="total-users">0</div>
      <div class="text-gray-500 text-sm">Total Users</div>
    </div>
    <div class="bg-white p-4 rounded-2xl shadow flex flex-col items-center">
      <div class="text-lg font-bold text-purple-600" id="premium-users">0</div>
      <div class="text-gray-500 text-sm">Premium Users</div>
    </div>
    <div class="bg-white p-4 rounded-2xl shadow flex flex-col items-center">
      <div class="text-lg font-bold text-blue-600" id="joined-today">0</div>
      <div class="text-gray-500 text-sm">Joined Today</div>
    </div>
    <div class="bg-white p-4 rounded-2xl shadow flex flex-col items-center">
      <div class="text-lg font-bold text-green-600" id="joined-week">0</div>
      <div class="text-gray-500 text-sm">Last 7 Days</div>
    </div>
  </div>

  <!-- Search + Filter Row -->
  <div class="flex flex-col md:flex-row justify-between items-center mb-6 gap-4">
    <!-- Google-style Search -->
    <div class="relative flex-1 w-full max-w-lg">
      <input id="user-search" type="text" placeholder="Search by username, email, UID, or full name..."
        class="w-full pl-10 pr-4 py-2 rounded-full border border-gray-300 shadow-sm focus:ring-2 focus:ring-blue-500 focus:outline-none transition" />
      <svg class="w-5 h-5 text-gray-400 absolute left-3 top-2.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
          d="M21 21l-4.35-4.35m0 0A7.5 7.5 0 1110.5 3a7.5 7.5 0 016.15 13.65z" />
      </svg>
    </div>

    <!-- Time Filter -->
    <select id="time-filter"
      class="p-2 rounded-lg border shadow focus:ring-2 focus:ring-blue-500">
      <option value="all">All Time</option>
      <option value="today">Today</option>
      <option value="yesterday">Yesterday</option>
      <option value="7days">Last 7 Days</option>
      <option value="30days">Last 30 Days</option>
      <option value="month">This Month</option>
    </select>
  </div>

  <!-- User List -->
  <div id="user-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"></div>
</section>

      
      
      
      
      
      
      <!-- Tasks -->
      <section id="adminReviewJobsSection" class="tab hidden mt-6">
        <h2 class="text-2xl font-bold mb-4">Pending Job Approvals</h2>
        <div id="adminPendingJobs" class="space-y-4"></div>
      </section>

      <!-- Task Submissions -->
      <section id="taskSubmissionsTab" class="tab hidden mt-6">
        <h2 class="text-2xl font-bold mb-4">Task Submissions</h2>
        <div id="task-submissions-list" class="space-y-4"></div>
      </section>

      <!-- Review Section -->
      <section id="review-section" class="hidden mt-6">
        <button onclick="backToSubmissions()" class="mb-4 text-blue-600 hover:underline">‚Üê Back to Submissions</button>
        <div id="review-content" class="bg-white p-6 rounded-2xl shadow-xl"></div>
      </section>









      
      <!-- Withdrawals -->
      <section id="withdrawals" class="tab hidden mt-6">
        <h2 class="text-2xl font-bold mb-4">Withdrawal Requests</h2>
        <div id="withdrawal-list" class="space-y-4"></div>
      </section>










      

      <!-- ================== POST ADMIN JOB FORM ================== -->
<section id="adminPostJob" class="tab-section hidden p-4">
  <h2 class="text-xl font-bold mb-4">Post Admin Job</h2>

  <div class="space-y-4">
    <input id="adminJobCategory" type="text" placeholder="Category"
      class="w-full border rounded-lg p-2" />

    <input id="adminJobTitle" type="text" placeholder="Job Title"
      class="w-full border rounded-lg p-2" />

    <textarea id="adminJobInstructions" placeholder="Instructions"
      class="w-full border rounded-lg p-2"></textarea>

    <input id="adminJobTargetLink" type="url" placeholder="Target Link"
      class="w-full border rounded-lg p-2" />

    <input id="adminJobProofRequired" type="text" placeholder="Proof Required"
      class="w-full border rounded-lg p-2" />

    <input id="adminJobNumWorkers" type="number" placeholder="Number of Workers"
      class="w-full border rounded-lg p-2" />

    <input id="adminJobWorkerPay" type="number" placeholder="Pay per Worker (‚Ç¶)"
      class="w-full border rounded-lg p-2" />

    <input id="adminJobProofFileCount" type="number" placeholder="Number of Proof Files" value="1"
      class="w-full border rounded-lg p-2" />

    <label class="block font-semibold">Campaign Logo</label>
    <input id="adminJobLogoFile" type="file" accept="image/*"
      class="w-full border rounded-lg p-2" />

    <button onclick="submitAdminJob()" class="bg-green-500 text-white px-4 py-2 rounded-lg">
      Post Job
    </button>
  </div>
</section>








<!-- ===== Social Tasks Admin (Modern, Searchable, Transaction-safe) ===== -->
<div id="social-tasks-admin" class="tab-section hidden p-6 bg-gradient-to-br from-gray-50 to-gray-100 min-h-screen">
  <!-- Header -->
  <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6">
    <h2 class="text-3xl font-extrabold text-gray-800 flex items-center gap-3">üìã Social Tasks Review</h2>

    <div class="flex gap-2 items-center">
      <button id="refreshBtn" class="px-4 py-2 rounded-lg bg-white shadow hover:bg-gray-50">üîÑ Refresh</button>
    </div>
  </div>

  <!-- Quick Stats + Controls -->
  <div class="grid grid-cols-1 lg:grid-cols-3 gap-4 mb-6">
    <!-- Stats -->
    <div class="col-span-1 grid grid-cols-3 gap-3">
      <div class="stat-card bg-white p-4 rounded-2xl shadow flex flex-col items-center">
        <span class="text-gray-500 text-sm">‚è≥ Pending</span>
        <span id="pendingCount" class="text-2xl font-bold text-blue-600 mt-1">0</span>
      </div>
      <div class="stat-card bg-white p-4 rounded-2xl shadow flex flex-col items-center">
        <span class="text-gray-500 text-sm">‚úÖ Approved</span>
        <span id="approvedCount" class="text-2xl font-bold text-green-600 mt-1">0</span>
      </div>
      <div class="stat-card bg-white p-4 rounded-2xl shadow flex flex-col items-center">
        <span class="text-gray-500 text-sm">‚ùå Rejected</span>
        <span id="rejectedCount" class="text-2xl font-bold text-red-600 mt-1">0</span>
      </div>
    </div>

    <!-- Primary controls: tabs + status filter -->
    <div class="col-span-1 bg-white rounded-2xl p-4 shadow flex flex-col gap-3">
      <div class="flex gap-2">
        <button onclick="setCollection('TiktokInstagram', this)" class="tab-btn active">TikTok / Instagram</button>
        <button onclick="setCollection('Whatsapp', this)" class="tab-btn">WhatsApp</button>
        <button onclick="setCollection('Telegram', this)" class="tab-btn">Telegram</button>
      </div>

      <div class="flex gap-2 mt-2">
        <button onclick="setStatusFilter('pending', this)" class="filter-btn active">‚è≥ Pending</button>
        <button onclick="setStatusFilter('approved', this)" class="filter-btn">‚úÖ Approved</button>
        <button onclick="setStatusFilter('rejected', this)" class="filter-btn">‚ùå Rejected</button>
        <button onclick="setStatusFilter('all', this)" class="filter-btn">All</button>
      </div>
    </div>

    <!-- Search / Sort / Date -->
    <div class="col-span-1 bg-white rounded-2xl p-4 shadow flex flex-col gap-3">
      <input id="searchInput" type="search" placeholder="Search by user ID, username, link..." class="p-3 rounded-lg border" />
      <div class="flex gap-2">
        <select id="sortSelect" onchange="setSort(this.value)" class="p-2 rounded-lg border">
          <option value="newest">Newest</option>
          <option value="oldest">Oldest</option>
        </select>
        <input id="startDate" type="date" onchange="setDateRange()" class="p-2 rounded-lg border" />
        <input id="endDate" type="date" onchange="setDateRange()" class="p-2 rounded-lg border" />
      </div>
    </div>
  </div>

  <!-- Task Container -->
  <div id="tasksContainer" class="grid gap-6 md:grid-cols-2 lg:grid-cols-3"></div>

  <!-- Load more -->
  <div class="mt-6 text-center">
    <button id="loadMoreBtn" class="px-5 py-2 rounded-lg bg-white shadow hidden">Load more</button>
  </div>
</div>

<!-- Image modal -->
<div id="imageModal" class="hidden fixed inset-0 z-50 bg-black bg-opacity-70 flex items-center justify-center p-4">
  <div class="bg-white rounded-lg max-w-3xl w-full p-4">
    <img id="imageModalImg" src="" class="w-full h-auto rounded" />
    <div class="mt-3 text-right">
      <button onclick="closeImageModal()" class="px-4 py-2 rounded bg-gray-200">Close</button>
    </div>
  </div>
</div>

<!-- Confirm modal (Approve / Reject) -->
<div id="confirmModal" class="hidden fixed inset-0 z-60 bg-black bg-opacity-40 flex items-center justify-center p-4">
  <div class="bg-white rounded-lg w-full max-w-lg p-6">
    <h3 id="confirmTitle" class="text-lg font-bold mb-3">Confirm</h3>
    <p id="confirmText" class="text-sm text-gray-700 mb-4"></p>

    <div id="rejectReasonWrap" class="mb-4 hidden">
      <label class="block text-sm text-gray-600 mb-1">Reject Reason (optional)</label>
      <textarea id="rejectReason" class="w-full p-3 border rounded-lg" rows="3"></textarea>
    </div>

    <div class="flex gap-3 justify-end">
      <button onclick="closeConfirmModal()" class="px-4 py-2 rounded bg-gray-100">Cancel</button>
      <button id="confirmActionBtn" class="px-4 py-2 rounded bg-green-500 text-white">Confirm</button>
    </div>
  </div>
</div>

<style>
  /* small UI polish */
  .tab-btn, .filter-btn {
    padding: 8px 12px;
    border-radius: 10px;
    background: #f1f5f9;
    cursor: pointer;
    font-weight: 600;
    transition: all 0.15s ease;
  }
  .tab-btn:hover, .filter-btn:hover { transform: translateY(-2px); }
  .tab-btn.active, .filter-btn.active {
    background: #2563eb; color: #fff;
    box-shadow: 0 6px 18px rgba(37,99,235,0.16);
  }
  .task-card {
    border-radius: 12px;
    padding: 16px;
    background: white;
    border: 1px solid #e6eefb;
    box-shadow: 0 6px 18px rgba(2,6,23,0.03);
  }
  .task-badge { display:inline-block; padding:6px 10px; border-radius:999px; font-weight:700; font-size:12px; }
  .badge-pending { background: #fff7ed; color: #b45309; }
  .badge-approved { background:#ecfdf5; color:#15803d; }
  .badge-rejected { background:#fff1f2; color:#b91c1c; }
  .task-thumb { max-width:120px; border-radius:10px; margin-top:8px; border:1px solid #e6eefb; cursor:pointer; }
  .task-meta { font-size:13px; color:#374151; margin-bottom:6px; }
</style>


      













      


<!-- üì≤ Airtime & Data Requests -->
<!-- ===== Airtime & Data Admin (2025 UI) ===== -->


<!-- üì≤ Airtime & Data Requests -->
<!-- üì≤ Airtime & Data Requests -->
<div id="bills-admin" class="tab-section hidden p-6 bg-gradient-to-br from-gray-50 via-white to-gray-50 min-h-screen">

  <!-- Header -->
  <div class="flex items-center justify-between mb-6">
    <h2 class="text-2xl font-extrabold text-gray-800 flex items-center gap-2">
      <span class="text-blue-600">üì≤</span> Airtime & Data Requests
    </h2>
  </div>

  <!-- Tabs: Airtime / Data -->
  <div class="flex gap-4 border-b mb-6">
    <button onclick="switchBillType('airtime')" id="tab-airtime"
      class="px-4 py-2 font-medium text-blue-600 border-b-2 border-blue-600">
      Airtime
    </button>
    <button onclick="switchBillType('data')" id="tab-data"
      class="px-4 py-2 font-medium text-gray-500 hover:text-blue-600">
      Data
    </button>
  </div>

  <!-- Subtabs: Pending / Successful / Failed -->
  <div class="flex gap-3 mb-6 bg-gray-100 p-1 rounded-full w-fit shadow-inner">
    <button onclick="switchBillStatus('pending')" id="subtab-pending"
      class="px-5 py-2 text-sm font-medium rounded-full bg-blue-600 text-white shadow-md transition">
      Pending
    </button>
    <button onclick="switchBillStatus('successful')" id="subtab-successful"
      class="px-5 py-2 text-sm font-medium rounded-full text-gray-600 hover:text-blue-600 transition">
      Successful
    </button>
    <button onclick="switchBillStatus('failed')" id="subtab-failed"
      class="px-5 py-2 text-sm font-medium rounded-full text-gray-600 hover:text-blue-600 transition">
      Failed
    </button>
  </div>

  <!-- Requests Grid -->
  <div id="billsContainer" class="grid gap-6 md:grid-cols-2 lg:grid-cols-3"></div>
</div>
      












      

<!-- ========================
 üìä Referral Dashboard Section
 ======================== -->
<section id="team" class="tab-section hidden px-5 sm:px-8 pb-16 space-y-8">

  <!-- KPI Cards -->
  <div class="grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-4">
    <div class="glass p-5">
      <div class="text-sm text-gray-500">Total Users</div>
      <div id="kpiTotalUsers" class="metric text-3xl font-semibold mt-2">0</div>
      <div class="text-xs text-gray-400 mt-1">All registered accounts</div>
    </div>
    <div class="glass p-5">
      <div class="text-sm text-gray-500">Total Referrals</div>
      <div id="kpiTotalReferrals" class="metric text-3xl font-semibold mt-2">0</div>
      <div class="text-xs text-gray-400 mt-1">Users who signed up via a referrer</div>
    </div>
    <div class="glass p-5">
      <div class="text-sm text-gray-500">Premium Users</div>
      <div id="kpiPremium" class="metric text-3xl font-semibold mt-2">0</div>
      <div class="text-xs text-gray-400 mt-1">is_Premium = true</div>
    </div>
    <div class="glass p-5">
      <div class="text-sm text-gray-500">Commission Paid</div>
      <div id="kpiCommission" class="metric text-3xl font-semibold mt-2">‚Ç¶0</div>
      <div class="text-xs text-gray-400 mt-1">Based on credited premium referrals</div>
    </div>
  </div>

  <!-- Chart + Leaderboard -->
  <div class="grid grid-cols-1 xl:grid-cols-3 gap-4">
    <div class="glass p-5 xl:col-span-2">
      <div class="flex items-center justify-between">
        <div class="font-semibold text-blue-700">Referral Trend (Last 14 Days)</div>
        <div class="text-xs text-gray-500">Based on user <code>joinedAt</code></div>
      </div>
      <div class="mt-4">
        <canvas id="trendChart" height="90"></canvas>
      </div>
      <div id="chartNote" class="text-xs text-gray-500 mt-3 hidden">
        Some users don‚Äôt have <code>joinedAt</code>. Those entries are skipped.
      </div>
    </div>

    <div class="glass p-5">
      <div class="flex items-center justify-between">
        <div class="font-semibold text-blue-700">Top Referrers</div>
        <div class="text-xs text-gray-500">Direct premium conversions</div>
      </div>
      <div class="mt-4 overflow-auto max-h-96 scroll-slim">
        <table class="min-w-full table">
          <thead>
            <tr class="text-xs text-gray-500">
              <th class="text-left py-2 pr-2">User</th>
              <th class="text-right py-2 pr-2">Referrals</th>
              <th class="text-right py-2">Earnings</th>
            </tr>
          </thead>
          <tbody id="leaderboardBody"></tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- Per-user Explorer -->
  <div class="glass p-5">
    <div class="flex flex-col md:flex-row md:items-end md:justify-between gap-4">
      <div>
        <div class="font-semibold text-blue-700">User Explorer</div>
        <div class="text-xs text-gray-500">Search any <span class="font-medium">@username</span> to see their referral tree</div>
      </div>
      <div class="flex items-center gap-2">
        <div class="relative">
          <span class="absolute left-3 top-2.5 text-gray-400">@</span>
          <input id="searchUsername" class="pl-7 pr-3 py-2 rounded-xl border border-blue-100 focus:ring-2 focus:ring-blue-500 focus:outline-none"
                 placeholder="username e.g. globals_admin"/>
        </div>
        <button id="searchBtn" class="btn-primary">Explore</button>
      </div>
    </div>

    <div id="userPanel" class="mt-6 hidden">
      <div class="grid grid-cols-1 lg:grid-cols-3 gap-4">
        <div class="glass p-4">
          <div class="text-sm text-gray-500">Direct Referrals</div>
          <div id="uDirectCount" class="metric text-2xl font-semibold mt-1">0</div>
        </div>
        <div class="glass p-4">
          <div class="text-sm text-gray-500">Second Level</div>
          <div id="uSecondCount" class="metric text-2xl font-semibold mt-1">0</div>
        </div>
        <div class="glass p-4">
          <div class="text-sm text-gray-500">Referral Earnings</div>
          <div id="uEarnings" class="metric text-2xl font-semibold mt-1">‚Ç¶0</div>
        </div>
      </div>

      <div class="mt-6 flex items-center gap-2">
        <input id="userRefLink" class="flex-1 px-3 py-2 rounded-xl border border-blue-100 bg-white" readonly />
        <button id="copyLinkBtn" class="btn-soft">Copy</button>
        <button id="shareLinkBtn" class="btn-primary">Share</button>
      </div>

      <div class="mt-6">
        <div class="font-medium text-blue-700 mb-2">Direct Referrals</div>
        <div id="uList" class="grid sm:grid-cols-2 xl:grid-cols-3 gap-3"></div>
      </div>
    </div>
  </div>

  </section>

      

    <style>
      
/* 2025 fintech vibe */
.glass {
  background: rgba(255,255,255,.65);
  backdrop-filter: blur(14px);
  -webkit-backdrop-filter: blur(14px);
  box-shadow: 0 12px 35px rgba(30,64,175,.12), inset 0 1px 0 rgba(255,255,255,.6);
  border: 1px solid rgba(59,130,246,.08);
  border-radius: 20px;
}
.metric {
  font-feature-settings: "tnum";
  font-variant-numeric: tabular-nums;
}
.btn-primary {
  background: linear-gradient(135deg,#2563eb,#1d4ed8);
  color:#fff;
  border-radius:12px;
  padding:.65rem 1rem;
  box-shadow:0 10px 24px rgba(37,99,235,.25);
  transition: transform .12s ease, box-shadow .12s ease;
}
.btn-primary:hover {
  transform: translateY(-1px);
  box-shadow:0 14px 28px rgba(37,99,235,.28);
}
.btn-soft {
  background: rgba(37,99,235,.08);
  color:#1d4ed8;
  border-radius:12px;
  padding:.65rem 1rem;
}
.table th{ font-weight:600; color:#1f2937; }
.table td{ color:#374151; }
.scroll-slim::-webkit-scrollbar{ height:8px; width:8px; }
.scroll-slim::-webkit-scrollbar-thumb{ background: rgba(49,130,246,.25); border-radius:9999px; }

    </style>


      

      







                      <!-- ADMIN NOTIFICATION-->
      
      <div id="adminNotificationSender" class="hidden px-4 pt-6 pb-24 max-w-4xl mx-auto">
  <h2 class="text-2xl font-bold mb-4 text-blue-700">Admin Notifications</h2>
  
  <!-- Title -->
  <input type="text" id="notifTitle" placeholder="Title" class="w-full mb-3 p-2 border rounded" />
  
  <!-- Message -->
  <textarea id="notifMessage" placeholder="Message" class="w-full p-2 border rounded mb-3"></textarea>

  <!-- Actions -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-3 mb-6">
    <button onclick="sendDashboardNotification()" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded w-full">Send to Dashboard Only</button>
    <button onclick="sendEmailNotification()" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded w-full">Send Email Only</button>
  </div>

  <!-- Email Template Editor -->
  <h3 class="text-lg font-semibold mt-8 mb-2">Edit Email Template</h3>
  <textarea id="emailTemplateEditor" class="w-full h-96 p-3 border rounded font-mono text-sm" placeholder="Paste or edit your HTML template here..."></textarea>
  
  <div class="mt-3 flex gap-3">
    <button onclick="saveEmailTemplate()" class="bg-yellow-500 hover:bg-yellow-600 text-white px-4 py-2 rounded">Save Template</button>
    <button onclick="resetDefaultTemplate()" class="bg-gray-400 hover:bg-gray-500 text-white px-4 py-2 rounded">Reset to Default</button>
  </div>
</div>








<!-- Admin Check-In Dashboard -->



<!-- Admin Check-In Dashboard -->  <div id="admin-checkin-screen"    class="tab-section hidden min-h-screen p-6 bg-gradient-to-br from-[#071024] via-[#071f2e] to-[#071024] text-white">    <!-- Header -->    <div class="flex items-center justify-between mb-6">      <div>          <h1 class="text-3xl font-extrabold bg-gradient-to-r from-blue-400 to-purple-500 text-transparent bg-clip-text">        
    Check-In Admin Console        
  </h1>        
  <p class="text-sm text-slate-300 mt-1">Live visibility into user check-ins & rewards.</p>        
</div>  <div class="flex items-center space-x-3">  <button id="admin-export-csv"        
class="px-4 py-2 rounded-2xl bg-gradient-to-r from-emerald-500 to-green-600 text-black font-semibold shadow-md hover:scale-105 transition">  
Export CSV  
</button>    <label class="flex items-center space-x-2 text-sm select-none">        
    <input id="admin-realtime-toggle" type="checkbox" class="w-4 h-4" />        
    <span class="text-slate-300">Realtime</span>        
  </label>    <button id="admin-scan-all"        
title="Scan all cycles (may be heavy if many docs)"        
class="px-3 py-2 rounded-2xl bg-white/6 text-sm hover:bg-white/10 transition">    
Recalculate totals (scan all)    
</button>  </div>    </div>    <!-- Summary cards -->    <div id="admin-summary" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 mb-6">        
    <div class="p-4 rounded-2xl bg-white/5 shadow-sm">        
      <div class="text-sm text-slate-300">Total users</div>        
      <div id="sum-total-users" class="text-2xl font-bold mt-1">‚Äî</div>        
    </div>        
    <div class="p-4 rounded-2xl bg-white/5 shadow-sm">        
      <div class="text-sm text-slate-300">Users checked today</div>        
      <div id="sum-checked-today" class="text-2xl font-bold mt-1">‚Äî</div>        
    </div>        
    <div class="p-4 rounded-2xl bg-white/5 shadow-sm">        
      <div class="text-sm text-slate-300">Total checkins (all-time)</div>        
      <div id="sum-total-checkins" class="text-2xl font-bold mt-1">‚Äî</div>        
    </div>        
    <div class="p-4 rounded-2xl bg-white/5 shadow-sm">        
      <div class="text-sm text-slate-300">Total rewards given (‚Ç¶)</div>        
      <div id="sum-total-rewards" class="text-2xl font-bold mt-1">‚Äî</div>        
    </div>        
  </div>    <!-- Controls -->    <div class="flex flex-col md:flex-row items-start md:items-center justify-between gap-3 mb-4">        
    <div class="flex items-center gap-2 w-full md:w-1/2">        
      <input id="admin-search" type="search" placeholder="Search name, email or uid"        
             class="w-full p-3 rounded-xl bg-white/5 placeholder:text-slate-400 focus:outline-none" />        
    </div>  <div class="flex items-center gap-2">        
  <select id="admin-view-select" class="p-2 rounded-xl bg-white/5">        
    <option value="all">All users</option>        
    <option value="today">Checked today</option>        
    <option value="completed">Completed cycles</option>        
  </select>      <input id="admin-from" type="date" class="p-2 rounded-xl bg-white/5" />        
  <input id="admin-to" type="date" class="p-2 rounded-xl bg-white/5" />    <button id="admin-filter-btn" class="px-4 py-2 rounded-2xl bg-gradient-to-r from-blue-500 to-purple-600 shadow-md">Filter</button>  </div>    </div>    <!-- Users table -->    <div class="overflow-auto bg-white/5 rounded-xl p-4">        
    <table class="min-w-full text-sm">        
      <thead>        
        <tr class="text-slate-300 text-left">        
          <th class="px-3 py-2">UID</th>        
          <th class="px-3 py-2">Name / Email</th>        
          <th class="px-3 py-2">Today</th>        
          <th class="px-3 py-2">Total checkins</th>        
          <th class="px-3 py-2">Completed cycles</th>        
          <th class="px-3 py-2">Rewards (‚Ç¶)</th>        
          <th class="px-3 py-2">Last check-in</th>        
          <th class="px-3 py-2">Actions</th>        
        </tr>        
      </thead>        
      <tbody id="admin-table-body" class="divide-y divide-white/6"></tbody>        
    </table>        
  </div>        
</div>  <!-- User details modal -->  <div id="admin-user-modal" class="fixed inset-0 z-50 hidden items-center justify-center">        
  <div class="absolute inset-0 bg-black/60" onclick="document.getElementById('admin-user-modal').classList.add('hidden')"></div>        
  <div class="relative max-w-3xl w-full bg-[#071228] rounded-2xl p-6 z-10 text-white shadow-xl">        
    <div class="flex items-center justify-between mb-4">        
      <h3 id="modal-uid" class="font-bold">User</h3>        
      <button onclick="document.getElementById('admin-user-modal').classList.add('hidden')" class="px-3 py-1 rounded-lg bg-white/6">Close</button>        
    </div>        
    <div id="modal-content" class="space-y-3 max-h-[60vh] overflow-auto"></div>        
  </div>        
</div>  





<!-- Paste at end of your CSS or inside a <style> before </body> -->
<style>
/* Admin Check-In: colorful, flashy theme overrides
   No JS changes. Add this after Tailwind CSS so it overrides utility colors.
*/

:root{
  --accent-blue: #60a5fa;
  --accent-purple: #a78bfa;
  --accent-green: #34d399;
  --muted: #e6f7ff;
  --glass: rgba(255,255,255,0.04);
  --card-border: rgba(167,139,250,0.12);
}

/* Base screen tweaks */
#admin-checkin-screen{
  color: var(--muted);
  background: linear-gradient(135deg, #051226 0%, #071f2e 45%, #04233a 100%);
}

/* Replace pale gray texts inside the admin screen */
#admin-checkin-screen [class*="text-slate-300"],
#admin-checkin-screen .text-slate-300 {
  color: #bfe6ff !important;
}

/* Make descriptions brighter */
#admin-checkin-screen p, #admin-checkin-screen label, #admin-checkin-screen small {
  color: #cdefff;
}

/* Summary cards - glassy with soft gradient accent */
#admin-summary > div {
  background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));
  border: 1px solid var(--card-border);
  padding: 1rem;
  border-radius: 1rem;
  backdrop-filter: blur(6px);
  position: relative;
  overflow: hidden;
  transition: transform .22s ease, box-shadow .22s ease;
}
#admin-summary > div:hover {
  transform: translateY(-6px);
  box-shadow: 0 20px 50px rgba(7,18,40,0.6);
}
#admin-summary > div::before{
  content: "";
  position: absolute;
  left: -40%;
  top: -30%;
  width: 180%;
  height: 160%;
  background: linear-gradient(90deg,var(--accent-blue),var(--accent-purple),var(--accent-green));
  opacity: 0.06;
  transform: rotate(12deg);
  pointer-events: none;
}
#admin-summary .text-2xl, #admin-summary .font-bold {
  color: white;
  text-shadow: 0 6px 16px rgba(106,90,225,0.08);
}

/* Buttons - punchy and lively */
#admin-export-csv, #admin-scan-all, #admin-filter-btn {
  border: none;
  font-weight: 700;
  transition: transform .16s ease, box-shadow .16s ease;
  border-radius: 12px;
}
#admin-export-csv {
  background: linear-gradient(90deg,var(--accent-green), #16a34a);
  color: #00210a;
  padding: .6rem 1rem;
}
#admin-export-csv:hover { transform: translateY(-3px); box-shadow: 0 10px 30px rgba(16,185,129,0.15); }

#admin-filter-btn {
  background: linear-gradient(90deg,var(--accent-blue), var(--accent-purple));
  color: white;
  padding: .6rem 1rem;
}
#admin-filter-btn:hover { transform: translateY(-3px); box-shadow: 0 10px 30px rgba(96,165,250,0.15); }

#admin-scan-all {
  background: linear-gradient(90deg, rgba(255,255,255,0.06), rgba(255,255,255,0.03));
  color: #dbeafe;
  padding: .45rem .9rem;
}

/* Inputs & selects - neon outlines on focus */
#admin-checkin-screen input[type="search"],
#admin-checkin-screen input[type="date"],
#admin-checkin-screen select {
  background: rgba(255,255,255,0.03);
  color: #e6f7ff;
  border: 1px solid rgba(255,255,255,0.06);
  padding: .75rem .9rem;
  border-radius: 12px;
}
#admin-checkin-screen input::placeholder { color: rgba(206,230,255,0.5); }
#admin-checkin-screen input:focus, #admin-checkin-screen select:focus {
  outline: none;
  box-shadow: 0 6px 30px rgba(96,165,250,0.12);
  border-color: rgba(96,165,250,0.6);
}

/* Table styling */
#admin-checkin-screen table {
  color: #dbeeff;
  width: 100%;
  border-collapse: collapse;
}
#admin-checkin-screen thead tr th {
  color: #dbeeff;
  font-weight: 600;
  letter-spacing: .01em;
  border-bottom: 1px solid rgba(255,255,255,0.03);
  padding: .8rem .6rem;
}
#admin-checkin-screen tbody tr td {
  padding: .85rem .6rem;
  vertical-align: middle;
}

/* Row stripes (subtle) */
#admin-checkin-screen tbody tr:nth-child(odd) {
  background: linear-gradient(90deg, rgba(9,17,30,0.02), rgba(9,17,30,0.03));
}
#admin-checkin-screen tbody tr:hover {
  background: linear-gradient(90deg, rgba(96,165,250,0.03), rgba(167,139,250,0.02));
}

/* UID column - highlight */
#admin-checkin-screen tbody tr td:first-child {
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", monospace;
  color: #a5f3fc;
  font-weight: 600;
}

/* Action buttons in table - add class 'actions-btn' to your action elements (optional) */
#admin-checkin-screen .actions-btn {
  background: linear-gradient(90deg,#60a5fa,#a78bfa);
  color: white;
  padding: .4rem .6rem;
  border-radius: .6rem;
  font-weight: 700;
  font-size: .85rem;
  border: none;
}

/* Modal styling */
#admin-user-modal .relative {
  background: linear-gradient(180deg, rgba(7,18,40,0.9), rgba(6,22,40,0.95));
  border: 1px solid rgba(120,91,255,0.12);
  box-shadow: 0 30px 90px rgba(6,12,24,0.7);
}
#admin-user-modal .absolute {
  background: rgba(2,6,23,0.75) !important;
}
#admin-user-modal button {
  color: #e6f7ff;
  background: rgba(255,255,255,0.03);
  border-radius: 8px;
  padding: .4rem .7rem;
}

/* Make sure small text is readable */
#admin-checkin-screen .text-sm { color: rgba(207,233,255,0.95); }

/* Override Tailwind-ish bg-white utilities if present */
[class*="bg-white/5"], [class*="bg-white/6"] {
  background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.015)) !important;
  border: 1px solid rgba(255,255,255,0.03) !important;
  box-shadow: 0 8px 30px rgba(2,6,23,0.4) !important;
}

/* Flashy underline for the H1 */
#admin-checkin-screen h1 {
  position: relative;
  display: inline-block;
  -webkit-background-clip: text;
  background-clip: text;
}
#admin-checkin-screen h1::after {
  content: "";
  height: 4px;
  width: 100%;
  display: block;
  margin-top: .6rem;
  background: linear-gradient(90deg,var(--accent-blue),var(--accent-purple),var(--accent-green));
  border-radius: 8px;
  opacity: 0.95;
  transform-origin: left;
  transition: transform .4s ease;
}
#admin-checkin-screen h1:hover::after {
  transform: scaleX(1.02);
}

/* Animated sweep on export button for life */
@keyframes sweep {
  0% { background-position: 0% 50%; }
  100% { background-position: 100% 50%; }
}
#admin-export-csv { background-size: 200% 200%; animation: sweep 6s linear infinite; }

/* Slight responsive adjustments */
@media (max-width: 768px) {
  #admin-summary { grid-template-columns: repeat(2,1fr); }
  #admin-checkin-screen .flex.items-center.space-x-3 { gap: .5rem; }
}
</style>




      


      

    </main>
  </div>

  <script>
    lucide.createIcons();
  </script>
  <script src="admin.js"></script>
</body>

</html>



















